<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Oswald:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <title>–ë—ã–∫–∏ –∏ –∫–æ—Ä–æ–≤—ã</title>
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="header__title">
                <a href="index.html" class="burger back_home">
                    <i class="material-icons">menu</i>
                </a>
                <img src="img/logo1.PNG" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-synopsis">
            </div>
            <h1 class="h1">Eugene Blogs Company</h1>
            <h4 class="h4">–°—Ç—É–¥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–≥—Ä, –ø—Ä–æ–≥—Ä–∞–º–º –∏ —Å–∞–π—Ç–æ–≤</h4>
        </div>
    </header>
    <section>
        <div class="container text-center">
            <div class="row">
                <div class="col-12">
                    <h2 class="mt-5 mb-5">üêÇ–ë—ã–∫–∏ –∏ –∫–æ—Ä–æ–≤—ãüêÑ</h2>
                    <input id="user_in" type="number" class="form-control" placeholder="–ß–∏—Å–ª–æ"
                        onkeypress='validate(event)'>
                    <br>
                    <button class="btn btn-success" onclick="Check()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <button class="btn btn-danger" onclick="Restart()">–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
                    <br>
                    <br>
                    <table class="table align-middle text-center">
                        <thead>
                            <tr class="table-info">
                                <th data-type="number">–ü–æ–ø—ã—Ç–∫–∞</th>
                                <th data-type="number">–í–≤–æ–¥</th>
                                <th data-type="string">–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                            </tr>
                        </thead>
                        <tbody class="list">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="container">
            <div class="footer__flex">
                <div class="footer__flex-left">
                    <p class="footer-p" id="copyright">¬© 2022 Eugene Blogs Company</p>
                </div>
                <div class="footer__flex-center">
                    <p class="footer-p">–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                </div>
                <div class="footer__flex-right">
                    <p class="footer-p">–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –ª—É—á—à–µ–π —Å—Ç—É–¥–∏–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è :)</p>
                </div>
            </div>
        </div>
    </footer>
    <script>
        window.onload = function () {
            document.getElementById("copyright").innerHTML = `¬© ${new Date().getUTCFullYear()} Eugene Blogs Company`
        };
        // –ú–µ—Ç–æ–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 4-–∑–Ω–∞—á–Ω–æ–≥–æ —á–∏—Å–ª–∞ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
        function random4Digit() {
            return shuffle("0123456789".split('')).join('').substring(0, 4);
        }
        function shuffle(o) {
            for (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
            return o;
        }
        // –†–∞–∑—Ä–µ—à–∞–µ–º –≤–≤–æ–¥ –¢–û–õ–¨–ö–û —Ü–∏—Ñ—Ä –≤ Input
        function validate(evt) {
            var theEvent = evt || window.event;
            if (theEvent.type === 'paste') {
                key = event.clipboardData.getData('text/plain');
            } else {
                var key = theEvent.keyCode || theEvent.which;
                key = String.fromCharCode(key);
            }
            var regex = /[0-9]|\./;
            if (!regex.test(key)) {
                theEvent.returnValue = false;
                if (theEvent.preventDefault) theEvent.preventDefault();
            }
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
        function Repetitions(str) {
            for (var i = 0; i <= str.length; i++) {
                for (var j = i + 1; j <= str.length; j++) {
                    if (str[j] == str[i]) {
                        return true;
                    }
                }
            }
            return false;
        }

        let number_in = document.getElementById("user_in"); // –£–¥–æ–±–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ Input
        let answer = "0"; // –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ
        let attempts = 1; // –ü–æ–ø—ã—Ç–∫–∏
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —á–∏—Å–ª–æ —Å–Ω–æ–≤–∞, –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª = 0
        while (answer[0] == "0") {
            answer = random4Digit();
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
        document.addEventListener('keydown', function (e) {
            if (e.key === "Enter") {
                Check(); // –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–ª–∞–≤–∏—à—É 'Enter', –∑–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é 'Check()'
            }
        });

        function Check() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã –≤ —Å—Ç—Ä–æ–∫–µ –±—ã–ª–æ –¢–û–õ–¨–ö–û 4 —Å–∏–º–≤–æ–ª–∞
            if (number_in.value.length == 4) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
                if (!Repetitions(number_in.value)) {
                    let bulls = 0; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ã–∫–æ–≤
                    let cows = 0; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–æ–≤
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª
                    for (let i = 0; i < 4; i++) {
                        if (number_in.value[i] === answer[i]) bulls++; // –ï—Å–ª–∏ —Ü–∏—Ñ—Ä–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ü–∏—Ñ—Ä–æ–π –≤ –æ—Ç–≤–µ—Ç–µ, –¥–æ–±–∞–≤–ª—è–µ–º –±—ã–∫–∞
                        else if (answer.includes(number_in.value[i])) cows++; // –ï—Å–ª–∏ —Ü–∏—Ñ—Ä–∞ –µ—Å—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ, –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–æ–≤—É
                    }
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ø—ã—Ç–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É
                    document.querySelector('.list').insertAdjacentHTML('beforeend',
                        `
                <tr>
                <td>${attempts}/10</td>
                <td>${number_in.value}</td>
                <td>üêÇ–ë—ã–∫–∏: ${bulls}, üêÑ–ö–æ—Ä–æ–≤—ã: ${cows}</td>
                </tr>
                `)
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–∏–≥—Ä–∞–ª –ª–∏ —á–µ–ª–æ–≤–µ–∫
                    if (bulls == 4) {
                        alert(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –≤—ã —É–≥–∞–¥–∞–ª–∏! –ö–æ–º–ø—å—é—Ç–µ—Ä –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ ${answer}.`)
                        location.href = document.URL;
                    } else {
                        // –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ø—ã—Ç–∫—É
                        attempts++;
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ–∏–≥—Ä–∞–ª –ª–∏ —á–µ–ª–æ–≤–µ–∫
                        if (attempts > 10) {
                            alert(`–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –ö–æ–º–ø—å—é—Ç–µ—Ä –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ ${answer}.`)
                            location.href = document.URL;
                        }
                    }
                } else {
                    alert("–¶–∏—Ñ—Ä—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è!")
                }
            } else {
                alert("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä –≤ —á–∏—Å–ª–µ! –ò—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 4.")
            }
        }
        function Restart() {
            location.href = document.URL; // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }
    </script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
</body>

</html>